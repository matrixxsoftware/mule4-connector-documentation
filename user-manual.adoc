= MATRIXX Monetization Connector

MuleSoft Certified

== About MATRIXX Software

MATRIXX is the world’s go-to monetization solution for telcos who are transforming their business to accelerate innovation as they roll out new network capabilities (5G Standalone and MEC) to effectively compete against existing and emerging competition by providing differentiated real-time customer experiences.  MATRIXX Digital Commerce Platform is purpose-built to deliver web scale performance and agility to diversify revenue streams, better segment customer offers, and innovate more rapidly.  MATRIXX DCP monetizes telco offers across lines of business including consumer, enterprise and wholesale, and facilitates the convergence of existing distinct OSS/BSS silos into a unified monetization process.

== About MATRIXX Monetization Connector
Automated and integrated end-to-end processes are fundamental to enabling telcos to compete at web scale. And at the heart of those integrated processes is MATRIXX Digital Commerce Platform, a monetization engine that delivers commercial agility, maximizes customer agility and ensures operational agility. 

With the MATRIXX Monetization Connector, a telco can readily integrate and orchestrate DCP’s monetization capabilities in real time to all their BSS/OSS systems to they can:

* Rapidly configure new price plans and offers and automatically integrate the DCP pricing catalog with the enterprise commercial catalog

* Support the Configure Price Quote (CPQ) processes through all customer-facing channels by presenting real-time, accurate prices from DCP

* Ensure that all new orders, moves, additions, changes, or deactivations are immediately reflected on the customer’s subscriptions so that one-time charges, recurring charges and usage charges are accurate at all times

== Prerequisites
This document assumes that you are familiar with Mule, Anypoint Connectors and 
Anypoint Studio.

== Prerequisites

* Access to a MATRIXX server

== Mule Compatibility

[width="100%", options="header"]
|=======
|Application/Service |Version
|Mule Runtime |4.0.x and later
|Anypoint Studio | 7.4.x and later
|MATRIXX Software | 5227 and later
|=======

== To Install this Connector in Anypoint Studio
To install the connector open the pom.xml file in the project root folder and add the following dependency:

```
<dependency>
    <groupId>com.mulesoft.connectors</groupId>
    <artifactId>mule4-matrixx-monetization-connector</artifactId>
    <version>1.0.0</version>
    <classifier>mule-plugin</classifier>
</dependency>
```

== Configure in Studio

=== To Configure the Connector
* After adding connector dependency to Mule project, click on *Global Elements* tab at the base of the canvas.
* In the Global Mule Configuration Elements screen, click *Create*.
* In the Choose Global Type wizard, collapse connector configuration and select *'MATRIXX Open Api Config'* and click OK.

image::img/redox-configt.png[]

* The configuration parameters to configure is

+
[options="header",width="50%"]
|============
|Field Name         |Value
|Base Uri           |Enter a Windows domain for the user to log in with.
|Access Token url   |url to generate token to access redox server.
|Api Key            |Enter the Api Key to log in with.
|Secret             |Enter the corresponding Secret.Both Api Key and Secret are used to generate token.
|Response Timeout   |Timeout for response, in Minutes(Default).

|============
+

* Parameter values can be directly entered into the global configuration properties, or reference from a configuration file that contains these values.
Here we are adding values to application properties file and reference it using placeholders.

image::img/global_config.png[]

image::img/global_config_advanced.png[]

* Make a *Test Connection...* to check that the configuration is correct.

image:img/global_config_test_connection.png[]

* On success, configuration is ready to use!

* Redox_Config configuration should look like below in Configuration XML:
+
```xml
   <redox:config name="Redox_Config" doc:name="Redox Config" doc:id="01100f5a-7cfb-4426-8c7f-9d3a59761b90" >
		<redox:oauth-connection apiKey="${redox.apiKey}" secret="${redox.secret}" baseUri="${redox.baseUri}" authorization="${redox.accessTokenUrl}"/>
	</redox:config>
```


== ​To Create a Mule Project in Anypoint Studio 7

The REDOX connector is an operation-based connector, which means that when you add the connector to your flow, you need to configure a specific operation the connector is intended to perform. Below is the *"Clinical Decisions(Request)"* operation for better understanding.

* Create new Mule Application in Studio and configure *HTTP Listener* to port 8081.

image::img/HTTP_Listener_Config.png[]

* Add "/clinicalDecisionsRequest" path to test the flow.

image::img/HTTP_Listener_Path.png[]

* Select *'Endpoint'* operation from Redox module, drag & drop it into canvas. Click on Clinical Endpoint operation.

image::img/clinicalDecisionsParametersWithoutDetails.png[]

* Select Redox configuration from drop down which was already configured previously in global elements, or if required new configuration can be added by clicking green plus (+) symbol.

image::img/global_config.png[]

image::img/global_config_advanced.png[]

* Make sure to test your connection, if you have add new connection details.
* Enter required details for *ClinicalDecisions(Request)* operation and save.

image::img/clinicalDecisionsParametersWithDetails.png[]

* Save the Mule project.
* Complete flow looks as below.

image::img/clinicalDecisionsRequestFlow.png[]

* Run the project as a Mule Application by right-clicking the project name in the Package Explorer, selecting Run As > Mule Application.
* Open Postman and check the response after entering the URL *http://localhost:8081/clinicalDecisionRequest*. You should see the 200 OK.This mean request has been sent successfully

```xml
<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:workday="http://www.mulesoft.org/schema/mule/workday"
	xmlns:redox="http://www.mulesoft.org/schema/mule/redox" xmlns:http="http://www.mulesoft.org/schema/mule/http"
	xmlns="http://www.mulesoft.org/schema/mule/core"
	xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="
http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/redox http://www.mulesoft.org/schema/mule/redox/current/mule-redox.xsd">
	<flow name="mule-redox-connector-clinicalDecision-request-operation-demoFlow" doc:id="404860e6-a860-4318-b36a-c088f20c13d8" >
		<http:listener doc:name="8081/clinicalDecisionRequest" doc:id="2dcc10ab-8c72-4a15-92f6-c20363c99759" config-ref="HTTP_Listener_config" path="/clinicalDecisionRequest"/>
		<redox:endpoint type="ClinicalDecisions(Request)" doc:name="ClinicalDecisions(Request)" doc:id="87b51c76-0f0f-4dda-ae5d-a5269cb06cfc" config-ref="Redox_Config"/>

</flow>
	</mule>

```

== See Also

link:release-notes.adoc[]

